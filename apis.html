<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Web APIs | Web Technologies in R</title>
  <meta name="description" content="<p>This tutorial provides a a short introduction to some of the Web Data
Technologies available in R.</p>" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Web APIs | Web Technologies in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This tutorial provides a a short introduction to some of the Web Data
Technologies available in R.</p>" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Web APIs | Web Technologies in R" />
  
  <meta name="twitter:description" content="<p>This tutorial provides a a short introduction to some of the Web Data
Technologies available in R.</p>" />
  

<meta name="author" content="Gaston Sanchez" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="jsonlite.html"/>
<link rel="next" href="api-pubmed.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>Web Technologies in R</b><br><small>Gaston Sanchez</small></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#my-series-of-r-tutorials"><i class="fa fa-check"></i>My Series of R Tutorials</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#donation"><i class="fa fa-check"></i>Donation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="part"><span><b>I Intro</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#suggested-tools"><i class="fa fa-check"></i><b>1.1</b> Suggested Tools</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#suggested-r-packages"><i class="fa fa-check"></i><b>1.2</b> Suggested R Packages</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#some-acronyms"><i class="fa fa-check"></i><b>1.3</b> Some Acronyms</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="web.html"><a href="web.html"><i class="fa fa-check"></i><b>2</b> The Web</a>
<ul>
<li class="chapter" data-level="2.1" data-path="web.html"><a href="web.html#surfing-the-web"><i class="fa fa-check"></i><b>2.1</b> Surfing the Web</a></li>
<li class="chapter" data-level="2.2" data-path="web.html"><a href="web.html#how-does-the-web-work"><i class="fa fa-check"></i><b>2.2</b> How Does the Web Work?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="http.html"><a href="http.html"><i class="fa fa-check"></i><b>3</b> Basics of HTTP</a>
<ul>
<li class="chapter" data-level="3.1" data-path="http.html"><a href="http.html#what-is-http"><i class="fa fa-check"></i><b>3.1</b> What is HTTP?</a></li>
<li class="chapter" data-level="3.2" data-path="http.html"><a href="http.html#a-quick-introduction-to-http"><i class="fa fa-check"></i><b>3.2</b> A quick introduction to HTTP</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="http.html"><a href="http.html#http-example"><i class="fa fa-check"></i><b>3.2.1</b> HTTP Example</a></li>
<li class="chapter" data-level="3.2.2" data-path="http.html"><a href="http.html#http-request"><i class="fa fa-check"></i><b>3.2.2</b> HTTP Request</a></li>
<li class="chapter" data-level="3.2.3" data-path="http.html"><a href="http.html#http-response"><i class="fa fa-check"></i><b>3.2.3</b> HTTP Response</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="http.html"><a href="http.html#anatomy-of-an-http-message"><i class="fa fa-check"></i><b>3.3</b> Anatomy of an HTTP message</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="http.html"><a href="http.html#http-methods"><i class="fa fa-check"></i><b>3.3.1</b> HTTP Methods</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II XML</b></span></li>
<li class="chapter" data-level="4" data-path="xml.html"><a href="xml.html"><i class="fa fa-check"></i><b>4</b> Basics of XML</a>
<ul>
<li class="chapter" data-level="4.1" data-path="xml.html"><a href="xml.html#what-is-xml"><i class="fa fa-check"></i><b>4.1</b> What is XML?</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="xml.html"><a href="xml.html#marks-in-xml"><i class="fa fa-check"></i><b>4.1.1</b> Marks in XML</a></li>
<li class="chapter" data-level="4.1.2" data-path="xml.html"><a href="xml.html#minimalist-example"><i class="fa fa-check"></i><b>4.1.2</b> Minimalist Example</a></li>
<li class="chapter" data-level="4.1.3" data-path="xml.html"><a href="xml.html#well-formedness"><i class="fa fa-check"></i><b>4.1.3</b> Well Formedness</a></li>
<li class="chapter" data-level="4.1.4" data-path="xml.html"><a href="xml.html#additional-xml-elements"><i class="fa fa-check"></i><b>4.1.4</b> Additional XML Elements</a></li>
<li class="chapter" data-level="4.1.5" data-path="xml.html"><a href="xml.html#another-example"><i class="fa fa-check"></i><b>4.1.5</b> Another Example</a></li>
<li class="chapter" data-level="4.1.6" data-path="xml.html"><a href="xml.html#wrapping-up"><i class="fa fa-check"></i><b>4.1.6</b> Wrapping-Up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="parsing-xml.html"><a href="parsing-xml.html"><i class="fa fa-check"></i><b>5</b> Parsing XML</a>
<ul>
<li class="chapter" data-level="5.1" data-path="parsing-xml.html"><a href="parsing-xml.html#what-is-parsing"><i class="fa fa-check"></i><b>5.1</b> What is parsing?</a></li>
<li class="chapter" data-level="5.2" data-path="parsing-xml.html"><a href="parsing-xml.html#r-package-xml2"><i class="fa fa-check"></i><b>5.2</b> R package <code>"xml2"</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="parsing-xml.html"><a href="parsing-xml.html#parsing-functions"><i class="fa fa-check"></i><b>5.2.1</b> Parsing Functions</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="parsing-xml.html"><a href="parsing-xml.html#working-with-parsed-documents"><i class="fa fa-check"></i><b>5.3</b> Working with parsed documents</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="parsing-xml.html"><a href="parsing-xml.html#example-with-a-basic-xml-document"><i class="fa fa-check"></i><b>5.3.1</b> Example with a basic XML document</a></li>
<li class="chapter" data-level="5.3.2" data-path="parsing-xml.html"><a href="parsing-xml.html#more-functions-in-xml2"><i class="fa fa-check"></i><b>5.3.2</b> More Functions in <code>"xml2"</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="parsing-xml.html"><a href="parsing-xml.html#navigation-of-xml-html-tree"><i class="fa fa-check"></i><b>5.3.3</b> Navigation of XML / HTML Tree</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="xpath.html"><a href="xpath.html"><i class="fa fa-check"></i><b>6</b> XPath Language</a>
<ul>
<li class="chapter" data-level="6.1" data-path="xpath.html"><a href="xpath.html#what-is-xpath"><i class="fa fa-check"></i><b>6.1</b> What is XPath?</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="xpath.html"><a href="xpath.html#xpath-syntax"><i class="fa fa-check"></i><b>6.1.1</b> XPath Syntax</a></li>
<li class="chapter" data-level="6.1.2" data-path="xpath.html"><a href="xpath.html#selecting-nodes"><i class="fa fa-check"></i><b>6.1.2</b> Selecting Nodes</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="xpath.html"><a href="xpath.html#xpath-examples"><i class="fa fa-check"></i><b>6.2</b> XPath Examples</a></li>
<li class="chapter" data-level="6.3" data-path="xpath.html"><a href="xpath.html#using-xpath-functions"><i class="fa fa-check"></i><b>6.3</b> Using XPath Functions</a></li>
</ul></li>
<li class="part"><span><b>III HTML</b></span></li>
<li class="chapter" data-level="7" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>7</b> Basics of HTML</a>
<ul>
<li class="chapter" data-level="7.1" data-path="html.html"><a href="html.html#a-quick-introduction-to-html"><i class="fa fa-check"></i><b>7.1</b> A quick introduction to HTML</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="html.html"><a href="html.html#html-document-structure"><i class="fa fa-check"></i><b>7.1.1</b> HTML document structure</a></li>
<li class="chapter" data-level="7.1.2" data-path="html.html"><a href="html.html#html-syntax"><i class="fa fa-check"></i><b>7.1.2</b> HTML Syntax</a></li>
<li class="chapter" data-level="7.1.3" data-path="html.html"><a href="html.html#what-the-browser-does"><i class="fa fa-check"></i><b>7.1.3</b> What the browser does</a></li>
<li class="chapter" data-level="7.1.4" data-path="html.html"><a href="html.html#web-scraping"><i class="fa fa-check"></i><b>7.1.4</b> Web Scraping</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV JSON</b></span></li>
<li class="chapter" data-level="8" data-path="json.html"><a href="json.html"><i class="fa fa-check"></i><b>8</b> JSON Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="json.html"><a href="json.html#json-basics"><i class="fa fa-check"></i><b>8.1</b> JSON Basics</a></li>
<li class="chapter" data-level="8.2" data-path="json.html"><a href="json.html#what-is-json"><i class="fa fa-check"></i><b>8.2</b> What is JSON?</a></li>
<li class="chapter" data-level="8.3" data-path="json.html"><a href="json.html#understanding-json-syntax"><i class="fa fa-check"></i><b>8.3</b> Understanding JSON Syntax</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="json.html"><a href="json.html#data-types"><i class="fa fa-check"></i><b>8.3.1</b> Data Types</a></li>
<li class="chapter" data-level="8.3.2" data-path="json.html"><a href="json.html#arrays"><i class="fa fa-check"></i><b>8.3.2</b> Arrays</a></li>
<li class="chapter" data-level="8.3.3" data-path="json.html"><a href="json.html#objects"><i class="fa fa-check"></i><b>8.3.3</b> Objects</a></li>
<li class="chapter" data-level="8.3.4" data-path="json.html"><a href="json.html#examples-of-json-data-containers"><i class="fa fa-check"></i><b>8.3.4</b> Examples of JSON Data Containers</a></li>
<li class="chapter" data-level="8.3.5" data-path="json.html"><a href="json.html#data-table-toy-example"><i class="fa fa-check"></i><b>8.3.5</b> Data Table Toy Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="jsonlite.html"><a href="jsonlite.html"><i class="fa fa-check"></i><b>9</b> JSON R packages</a>
<ul>
<li class="chapter" data-level="9.1" data-path="jsonlite.html"><a href="jsonlite.html#function-tojson"><i class="fa fa-check"></i><b>9.1</b> Function <code>toJSON()</code></a></li>
<li class="chapter" data-level="9.2" data-path="jsonlite.html"><a href="jsonlite.html#function-fromjson"><i class="fa fa-check"></i><b>9.2</b> Function <code>fromJSON()</code></a></li>
<li class="chapter" data-level="9.3" data-path="jsonlite.html"><a href="jsonlite.html#reading-json-data"><i class="fa fa-check"></i><b>9.3</b> Reading JSON Data</a></li>
</ul></li>
<li class="part"><span><b>V APIs</b></span></li>
<li class="chapter" data-level="10" data-path="apis.html"><a href="apis.html"><i class="fa fa-check"></i><b>10</b> Web APIs</a>
<ul>
<li class="chapter" data-level="10.1" data-path="apis.html"><a href="apis.html#introduction-1"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="apis.html"><a href="apis.html#a-little-bit-about-apis"><i class="fa fa-check"></i><b>10.2</b> A little bit about APIs</a></li>
<li class="chapter" data-level="10.3" data-path="apis.html"><a href="apis.html#using-r-as-an-http-client"><i class="fa fa-check"></i><b>10.3</b> Using R as an HTTP Client</a></li>
<li class="chapter" data-level="10.4" data-path="apis.html"><a href="apis.html#interacting-with-aps-via-r"><i class="fa fa-check"></i><b>10.4</b> Interacting with AP’s via R</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="apis.html"><a href="apis.html#making-request-from-r"><i class="fa fa-check"></i><b>10.4.1</b> Making request from R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="api-pubmed.html"><a href="api-pubmed.html"><i class="fa fa-check"></i><b>11</b> PubMed API Example</a>
<ul>
<li class="chapter" data-level="11.1" data-path="api-pubmed.html"><a href="api-pubmed.html#pubmed"><i class="fa fa-check"></i><b>11.1</b> PubMed</a></li>
<li class="chapter" data-level="11.2" data-path="api-pubmed.html"><a href="api-pubmed.html#basics-of-e-utilities"><i class="fa fa-check"></i><b>11.2</b> Basics of E-utilities</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="api-pubmed.html"><a href="api-pubmed.html#how-does-e-utilities-work"><i class="fa fa-check"></i><b>11.2.1</b> How does E-utilities work?</a></li>
<li class="chapter" data-level="11.2.2" data-path="api-pubmed.html"><a href="api-pubmed.html#searching-pubmed-from-within-r"><i class="fa fa-check"></i><b>11.2.2</b> Searching PubMed from within R</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.gastonsanchez.com" target="_blank">gastonsanchez.com</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Web Technologies in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="apis" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">10</span> Web APIs<a href="apis.html#apis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this chapter we’ll give you a crash introduction to Web APIs, and how to
use R for interacting with them.</p>
<p>You will need the following packages</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="apis.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb85-2"><a href="apis.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code></pre></div>
<div id="introduction-1" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Introduction<a href="apis.html#introduction-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far we’ve been dealing with data sets in various formats: internal data
objects in R (e.g. data tibble <code>starwars</code>), built-in data frames such as
<code>mtcars</code> or <code>oldfaithful</code>), reading files stored in your computer (txt, csv,
tsv, etc). But you also need to learn how to get data from the web.</p>
<p>For better or worse, reading data from the Web entails a whole other set of
considerations. Because of the large variety of data formats available in the
Web, we will primarily focus on retrieving data from
<em>Application Programming Interfaces</em> also known as APIs.</p>
<p>The reason to focus on APIs is because nowadays many companies, websites,
sources, etc. use APIs as their primary means to share information and data.
Many large websites like Reddit, Twitter and Facebook offer APIs so that data
analysts and data scientists can access interesting data. And having an API to
share data has become a standard thing to have.</p>
</div>
<div id="a-little-bit-about-apis" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> A little bit about APIs<a href="apis.html#a-little-bit-about-apis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>API stands for Application Programming Interface. If this sounds too fancy or
cryptic for you, then simply think of it as a “Data Sharing Interface”.</p>
<p>Instead of having to download a data file, an API allows programmers to request
data directly from a website. An API is a set of rules, protocols, and tools
for building software and applications.</p>
<div id="what-is-an-api" class="section level4 unnumbered hasAnchor">
<h4>What is an API?<a href="apis.html#what-is-an-api" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>“API” is a general term for the place where one computer program (the client)
interacts with another (the server), or with itself.</p>
<p>APIs offer data scientists a polished way to request clean and curated data
from a website. When a website like Facebook sets up an API, they are
essentially setting up a computer that waits for data requests.</p>
<p>Once this computer receives a data request, it will do its own processing of
the data and send it to the computer that requested it. From our perspective
as the requester, we will need to write code in R that creates the request and
tells the computer running the API what we need. That computer will then read
our code, process the request, and return nicely-formatted data that can be
easily parsed by existing R libraries.</p>
</div>
<div id="why-to-use-an-api" class="section level4 unnumbered hasAnchor">
<h4>Why to use an API?<a href="apis.html#why-to-use-an-api" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Why is this valuable? Contrast the API approach to pure web scraping. When a
programmer scrapes a web page, they receive the data in a messy chunk of HTML.
While there are certainly libraries out there that make parsing HTML text easy,
these are all cleaning steps that need to be taken before we even get our hands
on the data we want!</p>
<p>Often, we can immediately use the data we get from an API, which saves us time
and frustration.</p>
</div>
</div>
<div id="using-r-as-an-http-client" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Using R as an HTTP Client<a href="apis.html#using-r-as-an-http-client" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R has a few HTTP client packages: <code>"crul"</code>, <code>"curl"</code>, <code>"httr"</code>, and <code>"RCurl"</code>;
you can think of them as “high-level R HTTP clients” which basically let you
use R (and our computer) as an <strong>HTTP client</strong>.</p>
<p>We will describe how to use functions from <code>"httr"</code>.</p>
</div>
<div id="interacting-with-aps-via-r" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Interacting with AP’s via R<a href="apis.html#interacting-with-aps-via-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In R, we can use the <code>"httr"</code> library to make http requests and handle the
responses.</p>
<p>Let’s start with baby steps using the website <a href="https://api.adviceslip.com/" class="uri">https://api.adviceslip.com/</a>
which provides an API to get advice from the internet.</p>
<p>The first thing you need to do is to look at the web page to familiarize
yourself with the functionalities it provides.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-113"></span>
<img src="images/api/advice-slip.png" alt="Advice Slip JSON API" width="70%" />
<p class="caption">
Figure 10.1: Advice Slip JSON API
</p>
</div>
<p>The url <code>https://api.adviceslip.com/random</code> will give you a random advice:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-114"></span>
<img src="images/api/advice-slip-happiness.png" alt="Random advice from Advice Slip" width="70%" />
<p class="caption">
Figure 10.2: Random advice from Advice Slip
</p>
</div>
<div id="making-request-from-r" class="section level3 hasAnchor" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> Making request from R<a href="apis.html#making-request-from-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Notice that the format of the response is provided in JSON.</p>
<p>For instance, getting a random advice is quite simple, all you need is to make
a <code>GET</code> request. The associated function in <code>"httr"</code> is <code>GET()</code> which makes a
request to the URL <code>https://api.adviceslip.com/advice</code></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="apis.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># getting a random advice</span></span>
<span id="cb86-2"><a href="apis.html#cb86-2" aria-hidden="true" tabindex="-1"></a>request_url <span class="ot">&lt;-</span> <span class="st">&quot;https://api.adviceslip.com/advice&quot;</span></span>
<span id="cb86-3"><a href="apis.html#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="apis.html#cb86-4" aria-hidden="true" tabindex="-1"></a>request_get <span class="ot">&lt;-</span> <span class="fu">GET</span>(request_url)</span>
<span id="cb86-5"><a href="apis.html#cb86-5" aria-hidden="true" tabindex="-1"></a>request_get</span></code></pre></div>
<pre><code>Response [https://api.adviceslip.com/advice]
  Date: 2020-10-16 02:08
  Status: 200
  Content-Type: text/html; charset=UTF-8
  Size: 77 B</code></pre>
<p>The object <code>request_get</code> is an object of class <code>"response"</code>, which is basically
an R list that contains 10 elements:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="apis.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(request_get)</span></code></pre></div>
<pre><code> [1] &quot;url&quot;         &quot;status_code&quot; &quot;headers&quot;     &quot;all_headers&quot; &quot;cookies&quot;    
 [6] &quot;content&quot;     &quot;date&quot;        &quot;times&quot;       &quot;request&quot;     &quot;handle&quot;</code></pre>
<p>As you can tell, one of the elements in <code>request_get</code> is <code>"content"</code>. If you
try the <code>$</code> operator to extract this element and print it, you will get
something like this:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="apis.html#cb90-1" aria-hidden="true" tabindex="-1"></a>request_get<span class="sc">$</span>content</span></code></pre></div>
<pre><code> [1] 7b 22 73 6c 69 70 22 3a 20 7b 20 22 69 64 22 3a 20 39 36 2c 20 22 61 64 76
[26] 69 63 65 22 3a 20 22 44 6f 6e 27 74 20 67 69 76 65 20 74 6f 20 6f 74 68 65
[51] 72 73 20 61 64 76 69 63 65 20 77 68 69 63 68 20 79 6f 75 20 77 6f 75 6c 64
[76] 6e 27 74 20 66 6f 6c 6c 6f 77 2e 22 7d 7d</code></pre>
<p>which is not very helpful.</p>
<p>Instead of directly extracting the <code>"content"</code> element, it is recommended to
use the extractor function <code>content()</code> which will return the content in the
form of an <code>"html_document"</code> object:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="apis.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(request_get)</span></code></pre></div>
<pre><code>{html_document}
&lt;html&gt;
[1] &lt;body&gt;&lt;p&gt;{&quot;slip&quot;: { &quot;id&quot;: 96, &quot;advice&quot;: &quot;Don&#39;t give to others advice which  ...</code></pre>
<p>The above output is not the most friendly one. However, we can use the argument
<code>as = "text"</code> to change the output into a character vector:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="apis.html#cb94-1" aria-hidden="true" tabindex="-1"></a>request_content <span class="ot">&lt;-</span> <span class="fu">content</span>(request_get, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>)</span>
<span id="cb94-2"><a href="apis.html#cb94-2" aria-hidden="true" tabindex="-1"></a>request_content</span></code></pre></div>
<pre><code>[1] &quot;{\&quot;slip\&quot;: { \&quot;id\&quot;: 96, \&quot;advice\&quot;: \&quot;Don&#39;t give to others advice which you wouldn&#39;t follow.\&quot;}}&quot;</code></pre>
<p>It turns out that this content is in JSON format. Therefore, we need to use
a converting function <code>fromJSON()</code></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="apis.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fromJSON</span>(request_content)</span></code></pre></div>
<pre><code>$slip
$slip$id
[1] 96

$slip$advice
[1] &quot;Don&#39;t give to others advice which you wouldn&#39;t follow.&quot;</code></pre>
<p>All of the above steps can be compactly integrated into a single block of code
using the piper opeartor <code>%&gt;%</code> as follows:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="apis.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># getting a random advice</span></span>
<span id="cb98-2"><a href="apis.html#cb98-2" aria-hidden="true" tabindex="-1"></a>request_url <span class="ot">&lt;-</span> <span class="st">&quot;https://api.adviceslip.com/advice&quot;</span></span>
<span id="cb98-3"><a href="apis.html#cb98-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-4"><a href="apis.html#cb98-4" aria-hidden="true" tabindex="-1"></a>random_advice <span class="ot">&lt;-</span> request_url <span class="sc">%&gt;%</span></span>
<span id="cb98-5"><a href="apis.html#cb98-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">GET</span>() <span class="sc">%&gt;%</span></span>
<span id="cb98-6"><a href="apis.html#cb98-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">content</span>(<span class="at">as =</span> <span class="st">&quot;text&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb98-7"><a href="apis.html#cb98-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>()</span>
<span id="cb98-8"><a href="apis.html#cb98-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-9"><a href="apis.html#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(random_advice)</span>
<span id="cb98-10"><a href="apis.html#cb98-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-11"><a href="apis.html#cb98-11" aria-hidden="true" tabindex="-1"></a>random_advice<span class="sc">$</span>slip</span></code></pre></div>
<pre><code>[1] &quot;slip&quot;
$id
[1] 23

$advice
[1] &quot;Your smile could make someone&#39;s day, don&#39;t forget to wear it.&quot;</code></pre>
<div id="example-search-with-advice-id" class="section level4 unnumbered hasAnchor">
<h4>Example: Search with Advice ID<a href="apis.html#example-search-with-advice-id" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-122"></span>
<img src="images/api/advice-slip-by-id.png" alt="Random advices by id" width="70%" />
<p class="caption">
Figure 10.3: Random advices by id
</p>
</div>
<p>For example, the id = 5 results in the following advice:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-123"></span>
<img src="images/api/advice-slip-id5.png" alt="Random advice from Advice Slip" width="70%" />
<p class="caption">
Figure 10.4: Random advice from Advice Slip
</p>
</div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="apis.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># advice id=5</span></span>
<span id="cb100-2"><a href="apis.html#cb100-2" aria-hidden="true" tabindex="-1"></a>advice_id5 <span class="ot">&lt;-</span> <span class="st">&quot;https://api.adviceslip.com/advice/5&quot;</span> <span class="sc">%&gt;%</span></span>
<span id="cb100-3"><a href="apis.html#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">GET</span>() <span class="sc">%&gt;%</span></span>
<span id="cb100-4"><a href="apis.html#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">content</span>(<span class="at">as =</span> <span class="st">&quot;text&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb100-5"><a href="apis.html#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>()</span></code></pre></div>
</div>
<div id="example-search-query" class="section level4 unnumbered hasAnchor">
<h4>Example: Search Query<a href="apis.html#example-search-query" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You can search for an advice specifying a search query:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-125"></span>
<img src="images/api/advice-slip-search.png" alt="Random advices with search query" width="70%" />
<p class="caption">
Figure 10.5: Random advices with search query
</p>
</div>
<p><code>https://api.adviceslip.com/advice/search/chance</code></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-126"></span>
<img src="images/api/advice-slip-chance.png" alt="Random advices with search query 'chance'" width="75%" />
<p class="caption">
Figure 10.6: Random advices with search query ‘chance’
</p>
</div>
<p>Let’s search for the term <code>chance</code></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="apis.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># advice query &#39;chance&#39;</span></span>
<span id="cb101-2"><a href="apis.html#cb101-2" aria-hidden="true" tabindex="-1"></a>advice_chance <span class="ot">&lt;-</span> <span class="st">&quot;https://api.adviceslip.com/advice/search/chance&quot;</span> <span class="sc">%&gt;%</span></span>
<span id="cb101-3"><a href="apis.html#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">GET</span>() <span class="sc">%&gt;%</span></span>
<span id="cb101-4"><a href="apis.html#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">content</span>(<span class="at">as =</span> <span class="st">&quot;text&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb101-5"><a href="apis.html#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>()</span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="jsonlite.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="api-pubmed.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-web-tech.pdf", "R-web-tech.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
