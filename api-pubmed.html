<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 PubMed API Example | Web Technologies in R</title>
  <meta name="description" content="<p>This tutorial provides a a short introduction to some of the Web Data
Technologies available in R.</p>" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="11 PubMed API Example | Web Technologies in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This tutorial provides a a short introduction to some of the Web Data
Technologies available in R.</p>" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 PubMed API Example | Web Technologies in R" />
  
  <meta name="twitter:description" content="<p>This tutorial provides a a short introduction to some of the Web Data
Technologies available in R.</p>" />
  

<meta name="author" content="Gaston Sanchez" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="apis.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>Web Technologies in R</b><br><small>Gaston Sanchez</small></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#my-series-of-r-tutorials"><i class="fa fa-check"></i>My Series of R Tutorials</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#donation"><i class="fa fa-check"></i>Donation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="part"><span><b>I Intro</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#suggested-tools"><i class="fa fa-check"></i><b>1.1</b> Suggested Tools</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#suggested-r-packages"><i class="fa fa-check"></i><b>1.2</b> Suggested R Packages</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#some-acronyms"><i class="fa fa-check"></i><b>1.3</b> Some Acronyms</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="web.html"><a href="web.html"><i class="fa fa-check"></i><b>2</b> The Web</a>
<ul>
<li class="chapter" data-level="2.1" data-path="web.html"><a href="web.html#surfing-the-web"><i class="fa fa-check"></i><b>2.1</b> Surfing the Web</a></li>
<li class="chapter" data-level="2.2" data-path="web.html"><a href="web.html#how-does-the-web-work"><i class="fa fa-check"></i><b>2.2</b> How Does the Web Work?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="http.html"><a href="http.html"><i class="fa fa-check"></i><b>3</b> Basics of HTTP</a>
<ul>
<li class="chapter" data-level="3.1" data-path="http.html"><a href="http.html#what-is-http"><i class="fa fa-check"></i><b>3.1</b> What is HTTP?</a></li>
<li class="chapter" data-level="3.2" data-path="http.html"><a href="http.html#a-quick-introduction-to-http"><i class="fa fa-check"></i><b>3.2</b> A quick introduction to HTTP</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="http.html"><a href="http.html#http-example"><i class="fa fa-check"></i><b>3.2.1</b> HTTP Example</a></li>
<li class="chapter" data-level="3.2.2" data-path="http.html"><a href="http.html#http-request"><i class="fa fa-check"></i><b>3.2.2</b> HTTP Request</a></li>
<li class="chapter" data-level="3.2.3" data-path="http.html"><a href="http.html#http-response"><i class="fa fa-check"></i><b>3.2.3</b> HTTP Response</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="http.html"><a href="http.html#anatomy-of-an-http-message"><i class="fa fa-check"></i><b>3.3</b> Anatomy of an HTTP message</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="http.html"><a href="http.html#http-methods"><i class="fa fa-check"></i><b>3.3.1</b> HTTP Methods</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II XML</b></span></li>
<li class="chapter" data-level="4" data-path="xml.html"><a href="xml.html"><i class="fa fa-check"></i><b>4</b> Basics of XML</a>
<ul>
<li class="chapter" data-level="4.1" data-path="xml.html"><a href="xml.html#what-is-xml"><i class="fa fa-check"></i><b>4.1</b> What is XML?</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="xml.html"><a href="xml.html#marks-in-xml"><i class="fa fa-check"></i><b>4.1.1</b> Marks in XML</a></li>
<li class="chapter" data-level="4.1.2" data-path="xml.html"><a href="xml.html#minimalist-example"><i class="fa fa-check"></i><b>4.1.2</b> Minimalist Example</a></li>
<li class="chapter" data-level="4.1.3" data-path="xml.html"><a href="xml.html#well-formedness"><i class="fa fa-check"></i><b>4.1.3</b> Well Formedness</a></li>
<li class="chapter" data-level="4.1.4" data-path="xml.html"><a href="xml.html#additional-xml-elements"><i class="fa fa-check"></i><b>4.1.4</b> Additional XML Elements</a></li>
<li class="chapter" data-level="4.1.5" data-path="xml.html"><a href="xml.html#another-example"><i class="fa fa-check"></i><b>4.1.5</b> Another Example</a></li>
<li class="chapter" data-level="4.1.6" data-path="xml.html"><a href="xml.html#wrapping-up"><i class="fa fa-check"></i><b>4.1.6</b> Wrapping-Up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="parsing-xml.html"><a href="parsing-xml.html"><i class="fa fa-check"></i><b>5</b> Parsing XML</a>
<ul>
<li class="chapter" data-level="5.1" data-path="parsing-xml.html"><a href="parsing-xml.html#what-is-parsing"><i class="fa fa-check"></i><b>5.1</b> What is parsing?</a></li>
<li class="chapter" data-level="5.2" data-path="parsing-xml.html"><a href="parsing-xml.html#r-package-xml2"><i class="fa fa-check"></i><b>5.2</b> R package <code>"xml2"</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="parsing-xml.html"><a href="parsing-xml.html#parsing-functions"><i class="fa fa-check"></i><b>5.2.1</b> Parsing Functions</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="parsing-xml.html"><a href="parsing-xml.html#working-with-parsed-documents"><i class="fa fa-check"></i><b>5.3</b> Working with parsed documents</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="parsing-xml.html"><a href="parsing-xml.html#example-with-a-basic-xml-document"><i class="fa fa-check"></i><b>5.3.1</b> Example with a basic XML document</a></li>
<li class="chapter" data-level="5.3.2" data-path="parsing-xml.html"><a href="parsing-xml.html#more-functions-in-xml2"><i class="fa fa-check"></i><b>5.3.2</b> More Functions in <code>"xml2"</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="parsing-xml.html"><a href="parsing-xml.html#navigation-of-xml-html-tree"><i class="fa fa-check"></i><b>5.3.3</b> Navigation of XML / HTML Tree</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="xpath.html"><a href="xpath.html"><i class="fa fa-check"></i><b>6</b> XPath Language</a>
<ul>
<li class="chapter" data-level="6.1" data-path="xpath.html"><a href="xpath.html#what-is-xpath"><i class="fa fa-check"></i><b>6.1</b> What is XPath?</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="xpath.html"><a href="xpath.html#xpath-syntax"><i class="fa fa-check"></i><b>6.1.1</b> XPath Syntax</a></li>
<li class="chapter" data-level="6.1.2" data-path="xpath.html"><a href="xpath.html#selecting-nodes"><i class="fa fa-check"></i><b>6.1.2</b> Selecting Nodes</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="xpath.html"><a href="xpath.html#xpath-examples"><i class="fa fa-check"></i><b>6.2</b> XPath Examples</a></li>
<li class="chapter" data-level="6.3" data-path="xpath.html"><a href="xpath.html#using-xpath-functions"><i class="fa fa-check"></i><b>6.3</b> Using XPath Functions</a></li>
</ul></li>
<li class="part"><span><b>III HTML</b></span></li>
<li class="chapter" data-level="7" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>7</b> Basics of HTML</a>
<ul>
<li class="chapter" data-level="7.1" data-path="html.html"><a href="html.html#a-quick-introduction-to-html"><i class="fa fa-check"></i><b>7.1</b> A quick introduction to HTML</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="html.html"><a href="html.html#html-document-structure"><i class="fa fa-check"></i><b>7.1.1</b> HTML document structure</a></li>
<li class="chapter" data-level="7.1.2" data-path="html.html"><a href="html.html#html-syntax"><i class="fa fa-check"></i><b>7.1.2</b> HTML Syntax</a></li>
<li class="chapter" data-level="7.1.3" data-path="html.html"><a href="html.html#what-the-browser-does"><i class="fa fa-check"></i><b>7.1.3</b> What the browser does</a></li>
<li class="chapter" data-level="7.1.4" data-path="html.html"><a href="html.html#web-scraping"><i class="fa fa-check"></i><b>7.1.4</b> Web Scraping</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV JSON</b></span></li>
<li class="chapter" data-level="8" data-path="json.html"><a href="json.html"><i class="fa fa-check"></i><b>8</b> JSON Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="json.html"><a href="json.html#json-basics"><i class="fa fa-check"></i><b>8.1</b> JSON Basics</a></li>
<li class="chapter" data-level="8.2" data-path="json.html"><a href="json.html#what-is-json"><i class="fa fa-check"></i><b>8.2</b> What is JSON?</a></li>
<li class="chapter" data-level="8.3" data-path="json.html"><a href="json.html#understanding-json-syntax"><i class="fa fa-check"></i><b>8.3</b> Understanding JSON Syntax</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="json.html"><a href="json.html#data-types"><i class="fa fa-check"></i><b>8.3.1</b> Data Types</a></li>
<li class="chapter" data-level="8.3.2" data-path="json.html"><a href="json.html#arrays"><i class="fa fa-check"></i><b>8.3.2</b> Arrays</a></li>
<li class="chapter" data-level="8.3.3" data-path="json.html"><a href="json.html#objects"><i class="fa fa-check"></i><b>8.3.3</b> Objects</a></li>
<li class="chapter" data-level="8.3.4" data-path="json.html"><a href="json.html#examples-of-json-data-containers"><i class="fa fa-check"></i><b>8.3.4</b> Examples of JSON Data Containers</a></li>
<li class="chapter" data-level="8.3.5" data-path="json.html"><a href="json.html#data-table-toy-example"><i class="fa fa-check"></i><b>8.3.5</b> Data Table Toy Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="jsonlite.html"><a href="jsonlite.html"><i class="fa fa-check"></i><b>9</b> JSON R packages</a>
<ul>
<li class="chapter" data-level="9.1" data-path="jsonlite.html"><a href="jsonlite.html#function-tojson"><i class="fa fa-check"></i><b>9.1</b> Function <code>toJSON()</code></a></li>
<li class="chapter" data-level="9.2" data-path="jsonlite.html"><a href="jsonlite.html#function-fromjson"><i class="fa fa-check"></i><b>9.2</b> Function <code>fromJSON()</code></a></li>
<li class="chapter" data-level="9.3" data-path="jsonlite.html"><a href="jsonlite.html#reading-json-data"><i class="fa fa-check"></i><b>9.3</b> Reading JSON Data</a></li>
</ul></li>
<li class="part"><span><b>V APIs</b></span></li>
<li class="chapter" data-level="10" data-path="apis.html"><a href="apis.html"><i class="fa fa-check"></i><b>10</b> Web APIs</a>
<ul>
<li class="chapter" data-level="10.1" data-path="apis.html"><a href="apis.html#introduction-1"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="apis.html"><a href="apis.html#a-little-bit-about-apis"><i class="fa fa-check"></i><b>10.2</b> A little bit about APIs</a></li>
<li class="chapter" data-level="10.3" data-path="apis.html"><a href="apis.html#using-r-as-an-http-client"><i class="fa fa-check"></i><b>10.3</b> Using R as an HTTP Client</a></li>
<li class="chapter" data-level="10.4" data-path="apis.html"><a href="apis.html#interacting-with-aps-via-r"><i class="fa fa-check"></i><b>10.4</b> Interacting with AP’s via R</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="apis.html"><a href="apis.html#making-request-from-r"><i class="fa fa-check"></i><b>10.4.1</b> Making request from R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="api-pubmed.html"><a href="api-pubmed.html"><i class="fa fa-check"></i><b>11</b> PubMed API Example</a>
<ul>
<li class="chapter" data-level="11.1" data-path="api-pubmed.html"><a href="api-pubmed.html#pubmed"><i class="fa fa-check"></i><b>11.1</b> PubMed</a></li>
<li class="chapter" data-level="11.2" data-path="api-pubmed.html"><a href="api-pubmed.html#basics-of-e-utilities"><i class="fa fa-check"></i><b>11.2</b> Basics of E-utilities</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="api-pubmed.html"><a href="api-pubmed.html#how-does-e-utilities-work"><i class="fa fa-check"></i><b>11.2.1</b> How does E-utilities work?</a></li>
<li class="chapter" data-level="11.2.2" data-path="api-pubmed.html"><a href="api-pubmed.html#searching-pubmed-from-within-r"><i class="fa fa-check"></i><b>11.2.2</b> Searching PubMed from within R</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.gastonsanchez.com" target="_blank">gastonsanchez.com</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Web Technologies in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="api-pubmed" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">11</span> PubMed API Example<a href="api-pubmed.html#api-pubmed" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this chapter, we provide an example of web data collection from the database
PubMed, using the <strong>Entrez Programming Utilities</strong>, commonly referred to as
E-utilities, from the National Center for Biotechnology Information (NCBI).</p>
<p>You will need the following packages:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="api-pubmed.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)    <span class="co"># for strings and regular expressions</span></span>
<span id="cb102-2"><a href="api-pubmed.html#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)       <span class="co"># for parsing data in XML (e.g. HTML)</span></span>
<span id="cb102-3"><a href="api-pubmed.html#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)      <span class="co"># for scraping XML and HTML content</span></span>
<span id="cb102-4"><a href="api-pubmed.html#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)         <span class="co"># for text mining</span></span>
<span id="cb102-5"><a href="api-pubmed.html#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud2) <span class="co"># for graphing wordclouds (optional)</span></span></code></pre></div>
<div id="pubmed" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> PubMed<a href="api-pubmed.html#pubmed" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>PubMed</strong> (<a href="https://www.pubmed.gov" class="uri">https://www.pubmed.gov</a>) is a database of the largest collection of
citations to medical journal literature in the world, and it is one of 38
databases built and maintained by the NCBI. Scientists, researchers, and users
around the world use PubMed to search and retrieve bibliographic data, choose
from several display formats, and share their results. Keep in mind that when
people talk about PubMed, they could be referring to both the search interface
and to the database itself.</p>
<p>PubMed’s website provides a search engine to obtain bibliographic information:</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-130"></span>
<img src="images/api/pubmed-homepage.png" alt="Partial screenshot of PubMed's homepage" width="70%" />
<p class="caption">
Figure 11.1: Partial screenshot of PubMed’s homepage
</p>
</div>
<p>The simplest use of PubMed’s search engine is to provide a query, very similar
to the queries that you would provide to google’s search engine. For example,
we may be interested in looking for articles and other publications associated
with some of the effects that exposure to Bisphenol A (BPA) has on reproductive
health. Therefore, we can type in <code>BPA exposure reproductive health</code> inside the
search box, and obtain some results (like those displayed in the screenshot
below).</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-131"></span>
<img src="images/api/pubmed-search1.png" alt="PubMed search example" width="70%" />
<p class="caption">
Figure 11.2: PubMed search example
</p>
</div>
<p>As of this writing (Fall 2020), there are 359 results that match the query
term, with publications ranging from 1999 to end-of-2020. Notice that the
webpage has a sidebar with checkboxes, and other intereactive options, that
allow you to filter results by year of publication, by searching for the query
in the abstract, or just in the titles, and things like that. As an example,
we can move the slider for the year of publication to retrieve results that
were published in 2018 and 2019 (see screenshot below)</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-132"></span>
<img src="images/api/pubmed-search2.png" alt="PubMed search example (cont'd)" width="70%" />
<p class="caption">
Figure 11.3: PubMed search example (cont’d)
</p>
</div>
<p>If the obtained results are what you were looking for, you also have the option
to download a CSV file with such results (download button in the navigation bar,
above the barchart of years of publication).</p>
<p>In addition, you can perform a more advanced search by clicking on the
“Advanced” button displayed below the search box. Clicking on this option
will take you to a new page with more query boxes and a long list of query
fields (screenshot below).</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-133"></span>
<img src="images/api/pubmed-search3.png" alt="PubMed search example (cont'd)" width="70%" />
<p class="caption">
Figure 11.4: PubMed search example (cont’d)
</p>
</div>
<p>In the Advanced search mode, you can find a large list of fields that give you
the opportunity to specify a more detailed query. For example, you can be more
specific in your search by looking for results based on title, or based on
author(s) information, or by date of publication, etc.</p>
<p>This way of interacting with PubMed (and similar databases) is how most
users and researchers utilize PubMed: performing manual searches through their
browsers, obtaining the results on their screens, and deciding which
publications are worth further inspection. Sometimes, however, you may:</p>
<ul>
<li><p>have a question that cannot be answered easily when you search PubMed,</p></li>
<li><p>need to see every citation in PubMed in a certain field,</p></li>
<li><p>need to run a search in PubMed and get the output in a CSV file that
includes more (or different) data elements than the standard CSV file,</p></li>
<li><p>need to run specialized queries that might serve a very specific research
need.</p></li>
</ul>
<p>This is where <strong>E-utilities</strong> comes very handy because you can obtain the data
that you need, and only the data that you need, in the format that you need.
E-utilities is a great solution when you:</p>
<ul>
<li><p>can’t find a good way to ask your question using the PubMed search box.</p></li>
<li><p>can search PubMed, but you’d like more, or less, or different data returned
from the records.</p></li>
<li><p>want more control over the format of your PubMed data.</p></li>
</ul>
<p>E-utilities is simply another way to search PubMed and the other NCBI databases.
Formally, E-utilities is an Application Programming Interface (API) which allows
you to control exactly what fields you are searching, the specific data
elements you retrieve, the format of the data, and how you share your results.
When you use E-utilities to access PubMed, you are accessing the same
data that you would find at <a href="https://www.pubmed.gov" class="uri">https://www.pubmed.gov</a>.</p>
</div>
<div id="basics-of-e-utilities" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Basics of E-utilities<a href="api-pubmed.html#basics-of-e-utilities" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>E-utilities is the short name for the <strong>Entrez Programming Utilities</strong>, which
is simply another way to search PubMed and other NCBI databases. The
E-utilities website is:</p>
<p><a href="https://www.ncbi.nlm.nih.gov/books/NBK25500/" target="_blank">https://www.ncbi.nlm.nih.gov/books/NBK25500/</a></p>
<p>which contains the official documentation, written and maintained by Eric Sayers.</p>
<p>According to the website:</p>
<blockquote>
<p>“Entrez Programming Utilities (E-utilities) are a set of nine server-side
programs that provide a stable interface into the Entrez query and database
system at the National Center for Biotechnology Information (NCBI).”</p>
</blockquote>
<p>What does this mean? E-utilities is basically an Application Programming
Interface (API). The E-utilities API allows you to search PubMed and any other
NCBI database through your own program: e.g. R, Python, etc. When you use
E-utilities to access PubMed, you are accessing the same data that you’d find
at <a href="https://www.pubmed.gov" class="uri">https://www.pubmed.gov</a>.</p>
<p><em>Note</em>: the results returned by E-utilities queries of PubMed may differ
slightly from those returned in the web version of PubMed. As of this writing
(Fall 2020) a new PubMed API is currently under development.</p>
<div id="the-nine-e-utilities" class="section level4 unnumbered hasAnchor">
<h4>The Nine E-utilities<a href="api-pubmed.html#the-nine-e-utilities" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The name <em>E-utilities</em> comes from the nine utilities (or programs):</p>
<ul>
<li><p><strong>EInfo</strong> (database statistics): Provides the number of records indexed in each field of a given database, the date of the last update of the database, and the available links from the database to other Entrez databases.</p></li>
<li><p><strong>ESearch</strong> (database statistics): Responds to a text query with the list of matching UIDs in a given database (for later use in ESummary, EFetch or ELink), along with the term translations of the query.</p></li>
<li><p><strong>EPost</strong> (UID uploads): Accepts a list of UIDs from a given database, stores the set on the History Server, and responds with a query key and web environment for the uploaded dataset.</p></li>
<li><p><strong>ESummary</strong> (document summary downloads): Responds to a list of UIDs from a given database with the corresponding document summaries.</p></li>
<li><p><strong>EFetch</strong> (data record downloads): Responds to a list of UIDs in a given database with the corresponding data records in a specified format.</p></li>
<li><p><strong>ELink</strong> (Entrez links): Responds to a list of UIDs in a given database with either a list of related UIDs (and relevancy scores) in the same database or a list of linked UIDs in another Entrez database</p></li>
<li><p><strong>EGQuery</strong> (global query): Responds to a text query with the number of records matching the query in each Entrez database.</p></li>
<li><p><strong>ESpell</strong> (spelling suggestions): Retrieves spelling suggestions for a text query in a given database.</p></li>
<li><p><strong>ECitMatch</strong> (batch citation searching in PubMed): Retrieves PubMed IDs (PMIDs) corresponding to a set of input citation strings.</p></li>
</ul>
<p><strong>For illustration purposes, we will only focus on ESearch, ESummary, and EFetch.</strong></p>
</div>
<div id="how-does-e-utilities-work" class="section level3 hasAnchor" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> How does E-utilities work?<a href="api-pubmed.html#how-does-e-utilities-work" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The way you use E-utilities is by assembling an e-utilities URL, following
a specific set of rules, that you can use to make a request to one of its nine
servers.</p>
<p>Behind the scenes, the assembled E-utilities URL is translated into a standard
set of input parameters that are used as the values necessary for various NCBI
software components to search for and retrieve the requested data.
In other words, the URLs direct requests to servers that are used only by the
E-utilities and that are optimized to give users the best performance.</p>
<p>Before making any requests, keep in mind the following recommendation:</p>
<blockquote>
<p>“In order not to overload the E-utility servers, NCBI recommends that users
post no more than three URL requests per second and limit large jobs to
either weekends or between 9:00 PM and 5:00 AM Eastern time during weekdays.”</p>
</blockquote>
<p>By the way, you can obtain an API Key offering you enhanced levels of supported
access to the E-utilities. This is totally optional but worth knowing. In our
examples, we won’t need an API key, but if you plan to use PubMed more intensively
then consider getting an API Key.</p>
<div id="api-requests" class="section level4 unnumbered hasAnchor">
<h4>API Requests<a href="api-pubmed.html#api-requests" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To make requests, you have to assemble a URL. Each URL consists of three parts:</p>
<ol style="list-style-type: decimal">
<li><p><strong>The base URL</strong>: This is the address of the E-utilities server. Every URL
begins with <code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/</code></p></li>
<li><p><strong>A utility name</strong>: This is the name of the specific tool that you are using.
There are nine E-utilities and each one performs a specific function:</p>
<ul>
<li><strong>ESearch</strong>: Search a text query in a single database and retrieve the
list of matching unique identifiers (UIDs). In PubMed, ESearch retrieves a
list of PMIDs. <code>esearch.fcgi?</code></li>
<li><strong>ESummary</strong>: Retrieve document summaries for each UID. <code>esummary.fcgi?</code></li>
<li><strong>EFetch</strong>: Retrieve full records for each UID. <code>efetch.fcgi?</code></li>
<li><strong>EPost</strong>: Upload a list of UIDs for later use. <code>epost.fcgi?</code></li>
<li><strong>ELink</strong>: Retrieve UIDs for related or linked records, or LinkOut URLs.
<code>elink.fcgi?</code></li>
<li><strong>EInfo</strong>: Retrieve information and statistics about a single database.
<code>einfo.fcgi?</code></li>
<li><strong>ESpell</strong>: Retrieve spelling suggestions for a text query.
<code>espell.fcgi?</code></li>
<li><strong>ECitMatch</strong>: Search PubMed for a series of citation strings.
<code>ecitmatch.fcgi?</code></li>
<li><strong>EGQuery</strong>: Search a text query in all databases and return the number
of results for the query in each database. <code>egquery.fcgi?</code></li>
</ul></li>
</ol>
<p>The file extension <code>.fcgi?</code> stands for <em>Fast Common Gateway Interface</em>.</p>
<ol start="3" style="list-style-type: decimal">
<li><strong>The parameters</strong>: These are the details of your query. Common parameters
include the name of the database, your search terms, the number of results you
would like to get, and the format of the output. The parameters that are
available will change depending on the utility.</li>
</ol>
<p>When you put these three parts together, you will have a URL that looks
something like this:</p>
<pre><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&amp;term=reproductive+AND+health</code></pre>
<p>Let’s review three examples using utilities ESearch, ESummary, and EFetch.</p>
</div>
<div id="example-searching-pubmed-with-esearch" class="section level4 unnumbered hasAnchor">
<h4>Example: Searching PubMed with ESearch<a href="api-pubmed.html#example-searching-pubmed-with-esearch" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Suppose we are interested in searching for bibliographic information in PubMed
for the term <em>reproductive health</em>. Typically, the first thing to do when
searching for information in PubMed is to retrieve a list of unique IDs for
the documents that match the query text. All of this is done with <strong>ESearch</strong>,
which means we need to use the <code>esearch.fcgi?</code> path to assemble the URL:</p>
<pre><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&amp;term=reproductive+AND+health</code></pre>
<p>The above url uses the ESearch utility (<code>esearch.fcgi?</code>) and uses two query parameters, namely <code>db</code> and <code>term</code>.</p>
<ul>
<li><p><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/</code> is the base URL</p></li>
<li><p><code>esearch.fcgi?</code> indicates the E-utility (<em>ESearch</em> in this case)</p></li>
<li><p><code>db=pubmed</code>: indicates that the searched database is PubMed.</p></li>
<li><p><code>term=reproductive+AND+health</code>: indicates that the searched involves the
term <em>reproductive health</em>.</p></li>
<li><p>notice the use of <code>&amp;</code> to include a new query parameter</p></li>
</ul>
<p>By default, the information is retrieved in XML format (see screenshot below).
If you scroll through the XML output you’ll see the number of records retrieved
along with a list of unique document PubMed IDs (PMIDs) for those records.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-134"></span>
<img src="images/api/pubmed-esearch.png" alt="List of PubMed IDs in XML format" width="80%" />
<p class="caption">
Figure 11.5: List of PubMed IDs in XML format
</p>
</div>
</div>
<div id="example-retrieving-records-with-efetch" class="section level4 unnumbered hasAnchor">
<h4>Example: Retrieving records with EFetch<a href="api-pubmed.html#example-retrieving-records-with-efetch" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <strong>ESearch</strong> URL retrieves a list of PMIDs—not full records. To get the
full records you need to use <strong>EFetch</strong>—providing the list of IDs—and the
URL would look something like this:</p>
<pre><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&amp;id=33073741,33073726&amp;retmode=abstract&amp;rettype=text</code></pre>
<ul>
<li><p><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/</code> is the base URL</p></li>
<li><p><code>efetch.fcgi?</code> indicates the E-utility (<em>EFectch</em> in this case)</p></li>
<li><p><code>db=pubmed</code>: indicates that the searched database is PubMed.</p></li>
<li><p><code>id=33073741,33073726</code>: includes the PMIDs of the records.</p></li>
<li><p><code>retmode=abstract</code>: indicates the <code>abstract</code> as the <em>return mode</em>.</p></li>
<li><p><code>rettype=text</code>: determines the <code>text</code> as the <em>return type</em> format.</p></li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-135"></span>
<img src="images/api/pubmed-efetch.png" alt="Return type in text format for abstract of specified IDs" width="80%" />
<p class="caption">
Figure 11.6: Return type in text format for abstract of specified IDs
</p>
</div>
</div>
<div id="example-retrieving-summaries-with-esummary" class="section level4 unnumbered hasAnchor">
<h4>Example: Retrieving summaries with ESummary<a href="api-pubmed.html#example-retrieving-summaries-with-esummary" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <strong>ESummary</strong> URL allows you to get the document summaries of the associated
list of PMIDs, and the URL would look something like this:</p>
<pre><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&amp;id=33073741,33073726</code></pre>
<ul>
<li><p><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/</code> is the base URL</p></li>
<li><p><code>esummary.fcgi?</code> indicates the E-utility (<em>ESummary</em> in this case)</p></li>
<li><p><code>db=pubmed</code>: indicates that the searched database is PubMed.</p></li>
<li><p><code>id=33073741,33073726</code>: includes the PMIDs of the records.</p></li>
</ul>
<p>The output of ESummary is a series of XML <code>"DocSums"</code> (Document Summaries), the
format of which depends on the database. Below is an example DocSum for PubMed
ID 33073741.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-136"></span>
<img src="images/api/pubmed-esummary.png" alt="Summary in XML format for specified IDs" width="80%" />
<p class="caption">
Figure 11.7: Summary in XML format for specified IDs
</p>
</div>
</div>
</div>
<div id="searching-pubmed-from-within-r" class="section level3 hasAnchor" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Searching PubMed from within R<a href="api-pubmed.html#searching-pubmed-from-within-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that you have a basic understanding of PubMed, and the E-Utilities
programs, let’s see how to make requests from R.</p>
<p>We are going to consider a typical pipeline that involves three steps:</p>
<ol style="list-style-type: decimal">
<li><p>use ESearch to get a list of document IDs (default output in XML)</p></li>
<li><p>parse the IDs from the XML document</p></li>
<li><p>pass the list of IDs to either EFetch or ESummary</p></li>
</ol>
<p><strong>Step 1</strong>: As a first step, we can define a character string <code>entrez_url</code> with
the base URL, and three more strings for each of the E-utilities: <code>esearch</code>,
<code>efetch</code>, and <code>esummary</code>:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="api-pubmed.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base URL, and paths of associated e-utilities</span></span>
<span id="cb107-2"><a href="api-pubmed.html#cb107-2" aria-hidden="true" tabindex="-1"></a>entrez_url <span class="ot">&lt;-</span> <span class="st">&quot;https://eutils.ncbi.nlm.nih.gov/entrez/eutils/&quot;</span></span>
<span id="cb107-3"><a href="api-pubmed.html#cb107-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-4"><a href="api-pubmed.html#cb107-4" aria-hidden="true" tabindex="-1"></a>esearch <span class="ot">&lt;-</span> <span class="st">&quot;esearch.fcgi?&quot;</span></span>
<span id="cb107-5"><a href="api-pubmed.html#cb107-5" aria-hidden="true" tabindex="-1"></a>efetch <span class="ot">&lt;-</span> <span class="st">&quot;efetch.fcgi?&quot;</span></span>
<span id="cb107-6"><a href="api-pubmed.html#cb107-6" aria-hidden="true" tabindex="-1"></a>esummary <span class="ot">&lt;-</span> <span class="st">&quot;esummary.fcgi?&quot;</span></span></code></pre></div>
<p>Suppose we are interested in performing a search with the following parameters:</p>
<ul>
<li><p>searching for the term <em>BPA exposure reproductive health</em>;</p></li>
<li><p>limiting our search to documents between 2018 and 2019</p></li>
<li><p>retaining at most the first 100 results</p></li>
</ul>
<p><strong>Step 2</strong>: We can assemble an R string <code>params_esearch</code> with all the previous
ESearch query parameters:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="api-pubmed.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assembling string of parameters for the query</span></span>
<span id="cb108-2"><a href="api-pubmed.html#cb108-2" aria-hidden="true" tabindex="-1"></a>params_esearch <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb108-3"><a href="api-pubmed.html#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;db=pubmed&quot;</span>, </span>
<span id="cb108-4"><a href="api-pubmed.html#cb108-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;term=BPA+exposure+reproductive+health&quot;</span>,</span>
<span id="cb108-5"><a href="api-pubmed.html#cb108-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;mindate=2018&quot;</span>,</span>
<span id="cb108-6"><a href="api-pubmed.html#cb108-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;maxdate=2019&quot;</span>,</span>
<span id="cb108-7"><a href="api-pubmed.html#cb108-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;retmax=100&quot;</span>),</span>
<span id="cb108-8"><a href="api-pubmed.html#cb108-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">collapse =</span> <span class="st">&quot;&amp;&quot;</span>)</span>
<span id="cb108-9"><a href="api-pubmed.html#cb108-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-10"><a href="api-pubmed.html#cb108-10" aria-hidden="true" tabindex="-1"></a>params_esearch</span>
<span id="cb108-11"><a href="api-pubmed.html#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;db=pubmed&amp;term=BPA+exposure+reproductive+health&amp;mindate=2018&amp;maxdate=2019&amp;retmax=100&quot;</span></span></code></pre></div>
<p><strong>Step 3</strong>: With the base URL, the <code>esearch</code> utility, and the parameters, we
assemble the required URL that we can pass to <code>read_xml()</code>, and then use
<code>html_nodes()</code> and <code>html_text()</code> to extract the list of documents IDs:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="api-pubmed.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assemble an esearch URL</span></span>
<span id="cb109-2"><a href="api-pubmed.html#cb109-2" aria-hidden="true" tabindex="-1"></a>ids_query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(entrez_url, esearch, params_esearch)</span>
<span id="cb109-3"><a href="api-pubmed.html#cb109-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-4"><a href="api-pubmed.html#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieving IDs with ESearch</span></span>
<span id="cb109-5"><a href="api-pubmed.html#cb109-5" aria-hidden="true" tabindex="-1"></a>ids_xml <span class="ot">&lt;-</span> <span class="fu">read_xml</span>(ids_query)</span>
<span id="cb109-6"><a href="api-pubmed.html#cb109-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-7"><a href="api-pubmed.html#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="co"># extract Ids (PMIDs)</span></span>
<span id="cb109-8"><a href="api-pubmed.html#cb109-8" aria-hidden="true" tabindex="-1"></a>ids <span class="ot">&lt;-</span> <span class="fu">html_text</span>(<span class="fu">html_nodes</span>(ids_xml, <span class="at">xpath =</span> <span class="st">&quot;//Id&quot;</span>))</span></code></pre></div>
<p>The vector <code>ids</code> contains 94 retrieved document IDs, the first
5 and the last 5 five displayed below:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="api-pubmed.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ids, <span class="dv">5</span>)</span>
<span id="cb110-2"><a href="api-pubmed.html#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;31771501&quot; &quot;31697385&quot; &quot;31683046&quot; &quot;31658598&quot; &quot;31648075&quot;</span></span>
<span id="cb110-3"><a href="api-pubmed.html#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="api-pubmed.html#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(ids, <span class="dv">5</span>)</span>
<span id="cb110-5"><a href="api-pubmed.html#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;29549734&quot; &quot;29428396&quot; &quot;29415642&quot; &quot;29385186&quot; &quot;29317319&quot;</span></span></code></pre></div>
<p><strong>Step 4</strong>: We can then use this list of IDs to assemble a URL for obtaining
summary information of documents—via ESummary. Notice that Esummary uses
different parameters from the ones used in ESearch. The query parameters in
this case are <code>db</code> (name of database) and <code>id</code> (list of IDs). With the base URL,
the <code>esummary</code> utility, and the parameters <code>params_esummary</code>, we assemble the
required URL that we can pass to <code>read_xml()</code>:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="api-pubmed.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parameters for esummary</span></span>
<span id="cb111-2"><a href="api-pubmed.html#cb111-2" aria-hidden="true" tabindex="-1"></a>params_esummary <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb111-3"><a href="api-pubmed.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;db=pubmed&amp;id=&quot;</span>, </span>
<span id="cb111-4"><a href="api-pubmed.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(ids, <span class="at">collapse =</span> <span class="st">&quot;,&quot;</span>))</span>
<span id="cb111-5"><a href="api-pubmed.html#cb111-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-6"><a href="api-pubmed.html#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="co"># assemble an esummary URL</span></span>
<span id="cb111-7"><a href="api-pubmed.html#cb111-7" aria-hidden="true" tabindex="-1"></a>summaries_query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(entrez_url, esummary, params_esummary)</span>
<span id="cb111-8"><a href="api-pubmed.html#cb111-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-9"><a href="api-pubmed.html#cb111-9" aria-hidden="true" tabindex="-1"></a>summaries_xml <span class="ot">&lt;-</span> <span class="fu">read_xml</span>(summaries_query)</span></code></pre></div>
<p><strong>Step 5</strong>: To inspect the XML output we can use functions from package <code>"xml2"</code>
such as <code>xml_child()</code> for instance. Let’s take a look at the first node:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="api-pubmed.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xml_child</span>(summaries_xml, <span class="at">search =</span> <span class="dv">1</span>)</span>
<span id="cb112-2"><a href="api-pubmed.html#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; {xml_node}</span></span>
<span id="cb112-3"><a href="api-pubmed.html#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;DocSum&gt;</span></span>
<span id="cb112-4"><a href="api-pubmed.html#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &lt;Id&gt;31771501&lt;/Id&gt;</span></span>
<span id="cb112-5"><a href="api-pubmed.html#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2] &lt;Item Name=&quot;PubDate&quot; Type=&quot;Date&quot;&gt;2019 Oct&lt;/Item&gt;</span></span>
<span id="cb112-6"><a href="api-pubmed.html#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] &lt;Item Name=&quot;EPubDate&quot; Type=&quot;Date&quot;/&gt;</span></span>
<span id="cb112-7"><a href="api-pubmed.html#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &lt;Item Name=&quot;Source&quot; Type=&quot;String&quot;&gt;Toxicol Ind Health&lt;/Item&gt;</span></span>
<span id="cb112-8"><a href="api-pubmed.html#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] &lt;Item Name=&quot;AuthorList&quot; Type=&quot;List&quot;&gt;\n  &lt;Item Name=&quot;Author&quot; Type=&quot;String ...</span></span>
<span id="cb112-9"><a href="api-pubmed.html#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6] &lt;Item Name=&quot;LastAuthor&quot; Type=&quot;String&quot;&gt;Sun Z&lt;/Item&gt;</span></span>
<span id="cb112-10"><a href="api-pubmed.html#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &lt;Item Name=&quot;Title&quot; Type=&quot;String&quot;&gt;Oral exposure to low-dose bisphenol A i ...</span></span>
<span id="cb112-11"><a href="api-pubmed.html#cb112-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8] &lt;Item Name=&quot;Volume&quot; Type=&quot;String&quot;&gt;35&lt;/Item&gt;</span></span>
<span id="cb112-12"><a href="api-pubmed.html#cb112-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] &lt;Item Name=&quot;Issue&quot; Type=&quot;String&quot;&gt;10&lt;/Item&gt;</span></span>
<span id="cb112-13"><a href="api-pubmed.html#cb112-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &lt;Item Name=&quot;Pages&quot; Type=&quot;String&quot;&gt;647-659&lt;/Item&gt;</span></span>
<span id="cb112-14"><a href="api-pubmed.html#cb112-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &lt;Item Name=&quot;LangList&quot; Type=&quot;List&quot;&gt;\n  &lt;Item Name=&quot;Lang&quot; Type=&quot;String&quot;&gt;En ...</span></span>
<span id="cb112-15"><a href="api-pubmed.html#cb112-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12] &lt;Item Name=&quot;NlmUniqueID&quot; Type=&quot;String&quot;&gt;8602702&lt;/Item&gt;</span></span>
<span id="cb112-16"><a href="api-pubmed.html#cb112-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &lt;Item Name=&quot;ISSN&quot; Type=&quot;String&quot;&gt;0748-2337&lt;/Item&gt;</span></span>
<span id="cb112-17"><a href="api-pubmed.html#cb112-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14] &lt;Item Name=&quot;ESSN&quot; Type=&quot;String&quot;&gt;1477-0393&lt;/Item&gt;</span></span>
<span id="cb112-18"><a href="api-pubmed.html#cb112-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15] &lt;Item Name=&quot;PubTypeList&quot; Type=&quot;List&quot;&gt;\n  &lt;Item Name=&quot;PubType&quot; Type=&quot;Stri ...</span></span>
<span id="cb112-19"><a href="api-pubmed.html#cb112-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16] &lt;Item Name=&quot;RecordStatus&quot; Type=&quot;String&quot;&gt;PubMed - indexed for MEDLINE&lt;/Item&gt;</span></span>
<span id="cb112-20"><a href="api-pubmed.html#cb112-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17] &lt;Item Name=&quot;PubStatus&quot; Type=&quot;String&quot;&gt;ppublish&lt;/Item&gt;</span></span>
<span id="cb112-21"><a href="api-pubmed.html#cb112-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [18] &lt;Item Name=&quot;ArticleIds&quot; Type=&quot;List&quot;&gt;\n  &lt;Item Name=&quot;pubmed&quot; Type=&quot;String ...</span></span>
<span id="cb112-22"><a href="api-pubmed.html#cb112-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19] &lt;Item Name=&quot;DOI&quot; Type=&quot;String&quot;&gt;10.1177/0748233719885565&lt;/Item&gt;</span></span>
<span id="cb112-23"><a href="api-pubmed.html#cb112-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [20] &lt;Item Name=&quot;History&quot; Type=&quot;List&quot;&gt;\n  &lt;Item Name=&quot;entrez&quot; Type=&quot;Date&quot;&gt;201 ...</span></span>
<span id="cb112-24"><a href="api-pubmed.html#cb112-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ...</span></span></code></pre></div>
<p>The obtained summary information contains various fields such as date of
publication <code>PubDate</code>, list of authors <code>AuthorList</code>, title <code>Title</code>, starting
and ending pages <code>Pages</code>, etc.</p>
<p><strong>Step 6</strong>: To extract all the titles, we look for the <code>Item</code> nodes with
argument <code>Name="Title"</code>. To be more precise, we can define an XPath pattern
<code>'//Item[@Name="Title"]'</code> for <code>xml_nodes()</code>, and then extract the content
with <code>xml_text()</code>:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="api-pubmed.html#cb113-1" aria-hidden="true" tabindex="-1"></a>title_nodes <span class="ot">&lt;-</span> <span class="fu">xml_nodes</span>(summaries_xml, <span class="at">xpath =</span> <span class="st">&#39;//Item[@Name=&quot;Title&quot;]&#39;</span>)</span>
<span id="cb113-2"><a href="api-pubmed.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: `xml_nodes()` was deprecated in rvest 1.0.0.</span></span>
<span id="cb113-3"><a href="api-pubmed.html#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Please use `html_elements()` instead.</span></span>
<span id="cb113-4"><a href="api-pubmed.html#cb113-4" aria-hidden="true" tabindex="-1"></a>titles <span class="ot">&lt;-</span> <span class="fu">xml_text</span>(title_nodes)</span>
<span id="cb113-5"><a href="api-pubmed.html#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(titles)</span>
<span id="cb113-6"><a href="api-pubmed.html#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Oral exposure to low-dose bisphenol A induces hyperplasia of dorsolateral prostate and upregulates EGFR expression in adult &lt;i&gt;Sprague-Dawley&lt;/i&gt; rats.&quot;                                   </span></span>
<span id="cb113-7"><a href="api-pubmed.html#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2] &quot;Juvenile Toxicity Rodent Model to Study Toxicological Effects of Bisphenol A (BPA) at Dose Levels Derived From Italian Children Biomonitoring Study.&quot;                                      </span></span>
<span id="cb113-8"><a href="api-pubmed.html#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] &quot;Bisphenol F exposure impairs neurodevelopment in zebrafish larvae (Danio rerio).&quot;                                                                                                          </span></span>
<span id="cb113-9"><a href="api-pubmed.html#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] &quot;Effects of Dietary Bisphenol A on the Reproductive Function of Gilthead Sea Bream (&lt;i&gt;Sparus aurata&lt;/i&gt;) Testes.&quot;                                                                          </span></span>
<span id="cb113-10"><a href="api-pubmed.html#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] &quot;Urinary bisphenol A concentration is correlated with poorer oocyte retrieval and embryo implantation outcomes in patients with tubal factor infertility undergoing in vitro fertilisation.&quot;</span></span>
<span id="cb113-11"><a href="api-pubmed.html#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] &quot;In utero exposure to persistent and nonpersistent endocrine-disrupting chemicals and anogenital distance. A systematic review of epidemiological studies†.&quot;</span></span></code></pre></div>
<p>Finally, we can make a <a href="https://en.wikipedia.org/wiki/Tag_cloud" target="_blank">wordcloud</a>.
The code below has a series of commands to perform some text processing
(with functions from the text mining package <code>"tm"</code>) with the main terms
or words used to create the wordcloud.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="api-pubmed.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># title words</span></span>
<span id="cb114-2"><a href="api-pubmed.html#cb114-2" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">str_split</span>(titles, <span class="st">&quot; &quot;</span>))</span>
<span id="cb114-3"><a href="api-pubmed.html#cb114-3" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">tolower</span>(twords)</span>
<span id="cb114-4"><a href="api-pubmed.html#cb114-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-5"><a href="api-pubmed.html#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co"># auxiliary vector of stop words</span></span>
<span id="cb114-6"><a href="api-pubmed.html#cb114-6" aria-hidden="true" tabindex="-1"></a>stop_words <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb114-7"><a href="api-pubmed.html#cb114-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopwords</span>(<span class="at">kind =</span> <span class="st">&quot;en&quot;</span>),</span>
<span id="cb114-8"><a href="api-pubmed.html#cb114-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;bisphenol&quot;</span>, <span class="st">&quot;exposure&quot;</span>, <span class="st">&quot;reproductive&quot;</span>, <span class="st">&quot;health&quot;</span>, <span class="st">&quot;bpa&quot;</span>)</span>
<span id="cb114-9"><a href="api-pubmed.html#cb114-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb114-10"><a href="api-pubmed.html#cb114-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-11"><a href="api-pubmed.html#cb114-11" aria-hidden="true" tabindex="-1"></a><span class="co"># removing unnecessary things</span></span>
<span id="cb114-12"><a href="api-pubmed.html#cb114-12" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">removePunctuation</span>(twords)</span>
<span id="cb114-13"><a href="api-pubmed.html#cb114-13" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">removeNumbers</span>(twords)</span>
<span id="cb114-14"><a href="api-pubmed.html#cb114-14" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">removeWords</span>(twords, <span class="fu">stopwords</span>(<span class="at">kind =</span> <span class="st">&quot;en&quot;</span>))</span>
<span id="cb114-15"><a href="api-pubmed.html#cb114-15" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">removeWords</span>(twords, stop_words)</span>
<span id="cb114-16"><a href="api-pubmed.html#cb114-16" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> twords[twords <span class="sc">!=</span> <span class="st">&quot;&quot;</span>]</span>
<span id="cb114-17"><a href="api-pubmed.html#cb114-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-18"><a href="api-pubmed.html#cb114-18" aria-hidden="true" tabindex="-1"></a><span class="co"># data frame of terms and frequencies</span></span>
<span id="cb114-19"><a href="api-pubmed.html#cb114-19" aria-hidden="true" tabindex="-1"></a>dat_words <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(twords))</span>
<span id="cb114-20"><a href="api-pubmed.html#cb114-20" aria-hidden="true" tabindex="-1"></a>dat_words <span class="ot">&lt;-</span> dat_words[<span class="fu">order</span>(dat_words<span class="sc">$</span>Freq, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb114-21"><a href="api-pubmed.html#cb114-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_words, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb114-22"><a href="api-pubmed.html#cb114-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            twords Freq</span></span>
<span id="cb114-23"><a href="api-pubmed.html#cb114-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 161       effects   18</span></span>
<span id="cb114-24"><a href="api-pubmed.html#cb114-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 500         study   10</span></span>
<span id="cb114-25"><a href="api-pubmed.html#cb114-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 519      toxicity    9</span></span>
<span id="cb114-26"><a href="api-pubmed.html#cb114-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 313          male    8</span></span>
<span id="cb114-27"><a href="api-pubmed.html#cb114-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 192             f    7</span></span>
<span id="cb114-28"><a href="api-pubmed.html#cb114-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 197        female    7</span></span>
<span id="cb114-29"><a href="api-pubmed.html#cb114-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 303        levels    7</span></span>
<span id="cb114-30"><a href="api-pubmed.html#cb114-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 464             s    7</span></span>
<span id="cb114-31"><a href="api-pubmed.html#cb114-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 173 environmental    6</span></span>
<span id="cb114-32"><a href="api-pubmed.html#cb114-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 180      estrogen    6</span></span></code></pre></div>
<p>and then plotting a wordcloud with the function <code>wordcloud2()</code> from the package
<code>"wordcloud2"</code>:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="api-pubmed.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud2</span>(dat_words)</span></code></pre></div>
<p><img src="images/api/wordcloud_img.png" width="70%" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="apis.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-web-tech.pdf", "R-web-tech.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
