<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Web Technologies in R - 12&nbsp; PubMed API Example</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./4-02-api-open-notify.html" rel="prev">
<link href="./images/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-46765288', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">PubMed API Example</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Web Technologies in R</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">About</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">I Intro</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-01-introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-02-web.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Web</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-03-http.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Basics of HTTP</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">II XML &amp; HTML</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-01-xml.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Basics of XML</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-02-parsing-xml.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Parsing XML</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-03-xpath.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">XPath Language</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-04-html.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Basics of HTML</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">III JSON</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-01-json.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">JSON Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-02-jsonlite-package.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">JSON R packages</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">IV APIs</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-01-apis-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Web APIs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-02-api-open-notify.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Open Notify API</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-03-api-pubmed.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">PubMed API Example</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#pubmed" id="toc-pubmed" class="nav-link active" data-scroll-target="#pubmed"><span class="toc-section-number">12.1</span>  PubMed</a></li>
  <li><a href="#basics-of-e-utilities" id="toc-basics-of-e-utilities" class="nav-link" data-scroll-target="#basics-of-e-utilities"><span class="toc-section-number">12.2</span>  Basics of E-utilities</a>
  <ul class="collapse">
  <li><a href="#how-does-e-utilities-work" id="toc-how-does-e-utilities-work" class="nav-link" data-scroll-target="#how-does-e-utilities-work"><span class="toc-section-number">12.2.1</span>  How does E-utilities work?</a></li>
  <li><a href="#searching-pubmed-from-within-r" id="toc-searching-pubmed-from-within-r" class="nav-link" data-scroll-target="#searching-pubmed-from-within-r"><span class="toc-section-number">12.2.2</span>  Searching PubMed from within R</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="api-pubmed" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">PubMed API Example</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>In this chapter, we provide an example of web data collection from the database PubMed, using the <strong>Entrez Programming Utilities</strong>, commonly referred to as E-utilities, from the National Center for Biotechnology Information (NCBI).</p>
<p>You will need the following packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)    <span class="co"># for strings and regular expressions</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)       <span class="co"># for parsing data in XML (e.g. HTML)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)      <span class="co"># for scraping XML and HTML content</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)         <span class="co"># for text mining</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud2) <span class="co"># for graphing wordclouds (optional)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="pubmed" class="level2" data-number="12.1">
<h2 data-number="12.1" class="anchored" data-anchor-id="pubmed"><span class="header-section-number">12.1</span> PubMed</h2>
<p><strong>PubMed</strong> (https://www.pubmed.gov) is a database of the largest collection of citations to medical journal literature in the world, and it is one of 38 databases built and maintained by the NCBI. Scientists, researchers, and users around the world use PubMed to search and retrieve bibliographic data, choose from several display formats, and share their results. Keep in mind that when people talk about PubMed, they could be referring to both the search interface and to the database itself.</p>
<p>PubMed’s website provides a search engine to obtain bibliographic information:</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/api/pubmed-homepage.png" class="img-fluid figure-img" style="width:70.0%"></p>
<p></p><figcaption class="figure-caption">Partial screenshot of PubMed’s homepage</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>The simplest use of PubMed’s search engine is to provide a query, very similar to the queries that you would provide to google’s search engine. For example, we may be interested in looking for articles and other publications associated with some of the effects that exposure to Bisphenol A (BPA) has on reproductive health. Therefore, we can type in <code>BPA exposure reproductive health</code> inside the search box, and obtain some results (like those displayed in the screenshot below).</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/api/pubmed-search1.png" class="img-fluid figure-img" style="width:70.0%"></p>
<p></p><figcaption class="figure-caption">PubMed search example</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>As of this writing (Fall 2020), there are 359 results that match the query term, with publications ranging from 1999 to end-of-2020. Notice that the webpage has a sidebar with checkboxes, and other intereactive options, that allow you to filter results by year of publication, by searching for the query in the abstract, or just in the titles, and things like that. As an example, we can move the slider for the year of publication to retrieve results that were published in 2018 and 2019 (see screenshot below)</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/api/pubmed-search2.png" class="img-fluid figure-img" style="width:70.0%"></p>
<p></p><figcaption class="figure-caption">PubMed search example (cont’d)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>If the obtained results are what you were looking for, you also have the option to download a CSV file with such results (download button in the navigation bar, above the barchart of years of publication).</p>
<p>In addition, you can perform a more advanced search by clicking on the “Advanced” button displayed below the search box. Clicking on this option will take you to a new page with more query boxes and a long list of query fields (screenshot below).</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/api/pubmed-search3.png" class="img-fluid figure-img" style="width:70.0%"></p>
<p></p><figcaption class="figure-caption">PubMed search example (cont’d)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>In the Advanced search mode, you can find a large list of fields that give you the opportunity to specify a more detailed query. For example, you can be more specific in your search by looking for results based on title, or based on author(s) information, or by date of publication, etc.</p>
<p>This way of interacting with PubMed (and similar databases) is how most users and researchers utilize PubMed: performing manual searches through their browsers, obtaining the results on their screens, and deciding which publications are worth further inspection. Sometimes, however, you may:</p>
<ul>
<li><p>have a question that cannot be answered easily when you search PubMed,</p></li>
<li><p>need to see every citation in PubMed in a certain field,</p></li>
<li><p>need to run a search in PubMed and get the output in a CSV file that includes more (or different) data elements than the standard CSV file,</p></li>
<li><p>need to run specialized queries that might serve a very specific research need.</p></li>
</ul>
<p>This is where <strong>E-utilities</strong> comes very handy because you can obtain the data that you need, and only the data that you need, in the format that you need. E-utilities is a great solution when you:</p>
<ul>
<li><p>can’t find a good way to ask your question using the PubMed search box.</p></li>
<li><p>can search PubMed, but you’d like more, or less, or different data returned from the records.</p></li>
<li><p>want more control over the format of your PubMed data.</p></li>
</ul>
<p>E-utilities is simply another way to search PubMed and the other NCBI databases. Formally, E-utilities is an Application Programming Interface (API) which allows you to control exactly what fields you are searching, the specific data elements you retrieve, the format of the data, and how you share your results. When you use E-utilities to access PubMed, you are accessing the same data that you would find at https://www.pubmed.gov.</p>
</section>
<section id="basics-of-e-utilities" class="level2" data-number="12.2">
<h2 data-number="12.2" class="anchored" data-anchor-id="basics-of-e-utilities"><span class="header-section-number">12.2</span> Basics of E-utilities</h2>
<p>E-utilities is the short name for the <strong>Entrez Programming Utilities</strong>, which is simply another way to search PubMed and other NCBI databases. The E-utilities website is:</p>
<p><a href="https://www.ncbi.nlm.nih.gov/books/NBK25500/" target="_blank">https://www.ncbi.nlm.nih.gov/books/NBK25500/</a></p>
<p>which contains the official documentation, written and maintained by Eric Sayers.</p>
<p>According to the website:</p>
<blockquote class="blockquote">
<p>“Entrez Programming Utilities (E-utilities) are a set of nine server-side programs that provide a stable interface into the Entrez query and database system at the National Center for Biotechnology Information (NCBI).”</p>
</blockquote>
<p>What does this mean? E-utilities is basically an Application Programming Interface (API). The E-utilities API allows you to search PubMed and any other NCBI database through your own program: e.g.&nbsp;R, Python, etc. When you use E-utilities to access PubMed, you are accessing the same data that you’d find at https://www.pubmed.gov.</p>
<p><em>Note</em>: the results returned by E-utilities queries of PubMed may differ slightly from those returned in the web version of PubMed. As of this writing (Fall 2020) a new PubMed API is currently under development.</p>
<section id="the-nine-e-utilities" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="the-nine-e-utilities">The Nine E-utilities</h4>
<p>The name <em>E-utilities</em> comes from the nine utilities (or programs):</p>
<ul>
<li><p><strong>EInfo</strong> (database statistics): Provides the number of records indexed in each field of a given database, the date of the last update of the database, and the available links from the database to other Entrez databases.</p></li>
<li><p><strong>ESearch</strong> (database statistics): Responds to a text query with the list of matching UIDs in a given database (for later use in ESummary, EFetch or ELink), along with the term translations of the query.</p></li>
<li><p><strong>EPost</strong> (UID uploads): Accepts a list of UIDs from a given database, stores the set on the History Server, and responds with a query key and web environment for the uploaded dataset.</p></li>
<li><p><strong>ESummary</strong> (document summary downloads): Responds to a list of UIDs from a given database with the corresponding document summaries.</p></li>
<li><p><strong>EFetch</strong> (data record downloads): Responds to a list of UIDs in a given database with the corresponding data records in a specified format.</p></li>
<li><p><strong>ELink</strong> (Entrez links): Responds to a list of UIDs in a given database with either a list of related UIDs (and relevancy scores) in the same database or a list of linked UIDs in another Entrez database</p></li>
<li><p><strong>EGQuery</strong> (global query): Responds to a text query with the number of records matching the query in each Entrez database.</p></li>
<li><p><strong>ESpell</strong> (spelling suggestions): Retrieves spelling suggestions for a text query in a given database.</p></li>
<li><p><strong>ECitMatch</strong> (batch citation searching in PubMed): Retrieves PubMed IDs (PMIDs) corresponding to a set of input citation strings.</p></li>
</ul>
<p><strong>For illustration purposes, we will only focus on ESearch, ESummary, and EFetch.</strong></p>
</section>
<section id="how-does-e-utilities-work" class="level3" data-number="12.2.1">
<h3 data-number="12.2.1" class="anchored" data-anchor-id="how-does-e-utilities-work"><span class="header-section-number">12.2.1</span> How does E-utilities work?</h3>
<p>The way you use E-utilities is by assembling an e-utilities URL, following a specific set of rules, that you can use to make a request to one of its nine servers.</p>
<p>Behind the scenes, the assembled E-utilities URL is translated into a standard set of input parameters that are used as the values necessary for various NCBI software components to search for and retrieve the requested data. In other words, the URLs direct requests to servers that are used only by the E-utilities and that are optimized to give users the best performance.</p>
<p>Before making any requests, keep in mind the following recommendation:</p>
<blockquote class="blockquote">
<p>“In order not to overload the E-utility servers, NCBI recommends that users post no more than three URL requests per second and limit large jobs to either weekends or between 9:00 PM and 5:00 AM Eastern time during weekdays.”</p>
</blockquote>
<p>By the way, you can obtain an API Key offering you enhanced levels of supported access to the E-utilities. This is totally optional but worth knowing. In our examples, we won’t need an API key, but if you plan to use PubMed more intensively then consider getting an API Key.</p>
<section id="api-requests" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="api-requests">API Requests</h4>
<p>To make requests, you have to assemble a URL. Each URL consists of three parts:</p>
<ol type="1">
<li><p><strong>The base URL</strong>: This is the address of the E-utilities server. Every URL begins with <code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/</code></p></li>
<li><p><strong>A utility name</strong>: This is the name of the specific tool that you are using. There are nine E-utilities and each one performs a specific function:</p>
<ul>
<li><strong>ESearch</strong>: Search a text query in a single database and retrieve the list of matching unique identifiers (UIDs). In PubMed, ESearch retrieves a list of PMIDs. <code>esearch.fcgi?</code></li>
<li><strong>ESummary</strong>: Retrieve document summaries for each UID. <code>esummary.fcgi?</code></li>
<li><strong>EFetch</strong>: Retrieve full records for each UID. <code>efetch.fcgi?</code></li>
<li><strong>EPost</strong>: Upload a list of UIDs for later use. <code>epost.fcgi?</code></li>
<li><strong>ELink</strong>: Retrieve UIDs for related or linked records, or LinkOut URLs. <code>elink.fcgi?</code></li>
<li><strong>EInfo</strong>: Retrieve information and statistics about a single database. <code>einfo.fcgi?</code></li>
<li><strong>ESpell</strong>: Retrieve spelling suggestions for a text query. <code>espell.fcgi?</code></li>
<li><strong>ECitMatch</strong>: Search PubMed for a series of citation strings. <code>ecitmatch.fcgi?</code></li>
<li><strong>EGQuery</strong>: Search a text query in all databases and return the number of results for the query in each database. <code>egquery.fcgi?</code></li>
</ul></li>
</ol>
<p>The file extension <code>.fcgi?</code> stands for <em>Fast Common Gateway Interface</em>.</p>
<ol start="3" type="1">
<li><strong>The parameters</strong>: These are the details of your query. Common parameters include the name of the database, your search terms, the number of results you would like to get, and the format of the output. The parameters that are available will change depending on the utility.</li>
</ol>
<p>When you put these three parts together, you will have a URL that looks something like this:</p>
<pre><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&amp;term=reproductive+AND+health</code></pre>
<p>Let’s review three examples using utilities ESearch, ESummary, and EFetch.</p>
</section>
<section id="example-searching-pubmed-with-esearch" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="example-searching-pubmed-with-esearch">Example: Searching PubMed with ESearch</h4>
<p>Suppose we are interested in searching for bibliographic information in PubMed for the term <em>reproductive health</em>. Typically, the first thing to do when searching for information in PubMed is to retrieve a list of unique IDs for the documents that match the query text. All of this is done with <strong>ESearch</strong>, which means we need to use the <code>esearch.fcgi?</code> path to assemble the URL:</p>
<pre><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&amp;term=reproductive+AND+health</code></pre>
<p>The above url uses the ESearch utility (<code>esearch.fcgi?</code>) and uses two query parameters, namely <code>db</code> and <code>term</code>.</p>
<ul>
<li><p><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/</code> is the base URL</p></li>
<li><p><code>esearch.fcgi?</code> indicates the E-utility (<em>ESearch</em> in this case)</p></li>
<li><p><code>db=pubmed</code>: indicates that the searched database is PubMed.</p></li>
<li><p><code>term=reproductive+AND+health</code>: indicates that the searched involves the term <em>reproductive health</em>.</p></li>
<li><p>notice the use of <code>&amp;</code> to include a new query parameter</p></li>
</ul>
<p>By default, the information is retrieved in XML format (see screenshot below). If you scroll through the XML output you’ll see the number of records retrieved along with a list of unique document PubMed IDs (PMIDs) for those records.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/api/pubmed-esearch.png" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">List of PubMed IDs in XML format</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="example-retrieving-records-with-efetch" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="example-retrieving-records-with-efetch">Example: Retrieving records with EFetch</h4>
<p>The <strong>ESearch</strong> URL retrieves a list of PMIDs—not full records. To get the full records you need to use <strong>EFetch</strong>—providing the list of IDs—and the URL would look something like this:</p>
<pre><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&amp;id=33073741,33073726&amp;retmode=abstract&amp;rettype=text</code></pre>
<ul>
<li><p><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/</code> is the base URL</p></li>
<li><p><code>efetch.fcgi?</code> indicates the E-utility (<em>EFectch</em> in this case)</p></li>
<li><p><code>db=pubmed</code>: indicates that the searched database is PubMed.</p></li>
<li><p><code>id=33073741,33073726</code>: includes the PMIDs of the records.</p></li>
<li><p><code>retmode=abstract</code>: indicates the <code>abstract</code> as the <em>return mode</em>.</p></li>
<li><p><code>rettype=text</code>: determines the <code>text</code> as the <em>return type</em> format.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/api/pubmed-efetch.png" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Return type in text format for abstract of specified IDs</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="example-retrieving-summaries-with-esummary" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="example-retrieving-summaries-with-esummary">Example: Retrieving summaries with ESummary</h4>
<p>The <strong>ESummary</strong> URL allows you to get the document summaries of the associated list of PMIDs, and the URL would look something like this:</p>
<pre><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&amp;id=33073741,33073726</code></pre>
<ul>
<li><p><code>https://eutils.ncbi.nlm.nih.gov/entrez/eutils/</code> is the base URL</p></li>
<li><p><code>esummary.fcgi?</code> indicates the E-utility (<em>ESummary</em> in this case)</p></li>
<li><p><code>db=pubmed</code>: indicates that the searched database is PubMed.</p></li>
<li><p><code>id=33073741,33073726</code>: includes the PMIDs of the records.</p></li>
</ul>
<p>The output of ESummary is a series of XML <code>"DocSums"</code> (Document Summaries), the format of which depends on the database. Below is an example DocSum for PubMed ID 33073741.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/api/pubmed-esummary.png" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Summary in XML format for specified IDs</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="searching-pubmed-from-within-r" class="level3" data-number="12.2.2">
<h3 data-number="12.2.2" class="anchored" data-anchor-id="searching-pubmed-from-within-r"><span class="header-section-number">12.2.2</span> Searching PubMed from within R</h3>
<p>Now that you have a basic understanding of PubMed, and the E-Utilities programs, let’s see how to make requests from R.</p>
<p>We are going to consider a typical pipeline that involves three steps:</p>
<ol type="1">
<li><p>use ESearch to get a list of document IDs (default output in XML)</p></li>
<li><p>parse the IDs from the XML document</p></li>
<li><p>pass the list of IDs to either EFetch or ESummary</p></li>
</ol>
<p><strong>Step 1</strong>: As a first step, we can define a character string <code>entrez_url</code> with the base URL, and three more strings for each of the E-utilities: <code>esearch</code>, <code>efetch</code>, and <code>esummary</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base URL, and paths of associated e-utilities</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>entrez_url <span class="ot">&lt;-</span> <span class="st">"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>esearch <span class="ot">&lt;-</span> <span class="st">"esearch.fcgi?"</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>efetch <span class="ot">&lt;-</span> <span class="st">"efetch.fcgi?"</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>esummary <span class="ot">&lt;-</span> <span class="st">"esummary.fcgi?"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Suppose we are interested in performing a search with the following parameters:</p>
<ul>
<li><p>searching for the term <em>BPA exposure reproductive health</em>;</p></li>
<li><p>limiting our search to documents between 2018 and 2019</p></li>
<li><p>retaining at most the first 100 results</p></li>
</ul>
<p><strong>Step 2</strong>: We can assemble an R string <code>params_esearch</code> with all the previous ESearch query parameters:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assembling string of parameters for the query</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>params_esearch <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"db=pubmed"</span>, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"term=BPA+exposure+reproductive+health"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"mindate=2018"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"maxdate=2019"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"retmax=100"</span>),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">collapse =</span> <span class="st">"&amp;"</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>params_esearch</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "db=pubmed&amp;term=BPA+exposure+reproductive+health&amp;mindate=2018&amp;maxdate=2019&amp;retmax=100"</code></pre>
</div>
</div>
<p><strong>Step 3</strong>: With the base URL, the <code>esearch</code> utility, and the parameters, we assemble the required URL that we can pass to <code>read_xml()</code>, and then use <code>html_nodes()</code> and <code>html_text()</code> to extract the list of documents IDs:</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assemble an esearch URL</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ids_query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(entrez_url, esearch, params_esearch)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieving IDs with ESearch</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>ids_xml <span class="ot">&lt;-</span> <span class="fu">read_xml</span>(ids_query)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># extract Ids (PMIDs)</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>ids <span class="ot">&lt;-</span> <span class="fu">html_text</span>(<span class="fu">html_nodes</span>(ids_xml, <span class="at">xpath =</span> <span class="st">"//Id"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The vector <code>ids</code> contains 94 retrieved document IDs, the first 5 and the last 5 five displayed below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ids, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "31771501" "31697385" "31683046" "31658598" "31648075"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(ids, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "29549734" "29428396" "29415642" "29385186" "29317319"</code></pre>
</div>
</div>
<p><strong>Step 4</strong>: We can then use this list of IDs to assemble a URL for obtaining summary information of documents—via ESummary. Notice that Esummary uses different parameters from the ones used in ESearch. The query parameters in this case are <code>db</code> (name of database) and <code>id</code> (list of IDs). With the base URL, the <code>esummary</code> utility, and the parameters <code>params_esummary</code>, we assemble the required URL that we can pass to <code>read_xml()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parameters for esummary</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>params_esummary <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"db=pubmed&amp;id="</span>, </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(ids, <span class="at">collapse =</span> <span class="st">","</span>))</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># assemble an esummary URL</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>summaries_query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(entrez_url, esummary, params_esummary)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>summaries_xml <span class="ot">&lt;-</span> <span class="fu">read_xml</span>(summaries_query)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Step 5</strong>: To inspect the XML output we can use functions from package <code>"xml2"</code> such as <code>xml_child()</code> for instance. Let’s take a look at the first node:</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xml_child</span>(summaries_xml, <span class="at">search =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{xml_node}
&lt;DocSum&gt;
 [1] &lt;Id&gt;31771501&lt;/Id&gt;
 [2] &lt;Item Name="PubDate" Type="Date"&gt;2019 Oct&lt;/Item&gt;
 [3] &lt;Item Name="EPubDate" Type="Date"/&gt;
 [4] &lt;Item Name="Source" Type="String"&gt;Toxicol Ind Health&lt;/Item&gt;
 [5] &lt;Item Name="AuthorList" Type="List"&gt;\n  &lt;Item Name="Author" Type="String ...
 [6] &lt;Item Name="LastAuthor" Type="String"&gt;Sun Z&lt;/Item&gt;
 [7] &lt;Item Name="Title" Type="String"&gt;Oral exposure to low-dose bisphenol A i ...
 [8] &lt;Item Name="Volume" Type="String"&gt;35&lt;/Item&gt;
 [9] &lt;Item Name="Issue" Type="String"&gt;10&lt;/Item&gt;
[10] &lt;Item Name="Pages" Type="String"&gt;647-659&lt;/Item&gt;
[11] &lt;Item Name="LangList" Type="List"&gt;\n  &lt;Item Name="Lang" Type="String"&gt;En ...
[12] &lt;Item Name="NlmUniqueID" Type="String"&gt;8602702&lt;/Item&gt;
[13] &lt;Item Name="ISSN" Type="String"&gt;0748-2337&lt;/Item&gt;
[14] &lt;Item Name="ESSN" Type="String"&gt;1477-0393&lt;/Item&gt;
[15] &lt;Item Name="PubTypeList" Type="List"&gt;\n  &lt;Item Name="PubType" Type="Stri ...
[16] &lt;Item Name="RecordStatus" Type="String"&gt;PubMed - indexed for MEDLINE&lt;/Item&gt;
[17] &lt;Item Name="PubStatus" Type="String"&gt;ppublish&lt;/Item&gt;
[18] &lt;Item Name="ArticleIds" Type="List"&gt;\n  &lt;Item Name="pubmed" Type="String ...
[19] &lt;Item Name="DOI" Type="String"&gt;10.1177/0748233719885565&lt;/Item&gt;
[20] &lt;Item Name="History" Type="List"&gt;\n  &lt;Item Name="entrez" Type="Date"&gt;201 ...
...</code></pre>
</div>
</div>
<p>The obtained summary information contains various fields such as date of publication <code>PubDate</code>, list of authors <code>AuthorList</code>, title <code>Title</code>, starting and ending pages <code>Pages</code>, etc.</p>
<p><strong>Step 6</strong>: To extract all the titles, we look for the <code>Item</code> nodes with argument <code>Name="Title"</code>. To be more precise, we can define an XPath pattern <code>'//Item[@Name="Title"]'</code> for <code>xml_nodes()</code>, and then extract the content with <code>xml_text()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>title_nodes <span class="ot">&lt;-</span> <span class="fu">xml_nodes</span>(summaries_xml, <span class="at">xpath =</span> <span class="st">'//Item[@Name="Title"]'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `xml_nodes()` was deprecated in rvest 1.0.0.
ℹ Please use `html_elements()` instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>titles <span class="ot">&lt;-</span> <span class="fu">xml_text</span>(title_nodes)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(titles)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Oral exposure to low-dose bisphenol A induces hyperplasia of dorsolateral prostate and upregulates EGFR expression in adult &lt;i&gt;Sprague-Dawley&lt;/i&gt; rats."                                   
[2] "Juvenile Toxicity Rodent Model to Study Toxicological Effects of Bisphenol A (BPA) at Dose Levels Derived From Italian Children Biomonitoring Study."                                      
[3] "Bisphenol F exposure impairs neurodevelopment in zebrafish larvae (Danio rerio)."                                                                                                          
[4] "Effects of Dietary Bisphenol A on the Reproductive Function of Gilthead Sea Bream (&lt;i&gt;Sparus aurata&lt;/i&gt;) Testes."                                                                          
[5] "Urinary bisphenol A concentration is correlated with poorer oocyte retrieval and embryo implantation outcomes in patients with tubal factor infertility undergoing in vitro fertilisation."
[6] "In utero exposure to persistent and nonpersistent endocrine-disrupting chemicals and anogenital distance. A systematic review of epidemiological studies†."                                </code></pre>
</div>
</div>
<p>Finally, we can make a <a href="https://en.wikipedia.org/wiki/Tag_cloud" target="_blank">wordcloud</a>. The code below has a series of commands to perform some text processing (with functions from the text mining package <code>"tm"</code>) with the main terms or words used to create the wordcloud.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># title words</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">str_split</span>(titles, <span class="st">" "</span>))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">tolower</span>(twords)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># auxiliary vector of stop words</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>stop_words <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopwords</span>(<span class="at">kind =</span> <span class="st">"en"</span>),</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"bisphenol"</span>, <span class="st">"exposure"</span>, <span class="st">"reproductive"</span>, <span class="st">"health"</span>, <span class="st">"bpa"</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># removing unnecessary things</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">removePunctuation</span>(twords)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">removeNumbers</span>(twords)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">removeWords</span>(twords, <span class="fu">stopwords</span>(<span class="at">kind =</span> <span class="st">"en"</span>))</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> <span class="fu">removeWords</span>(twords, stop_words)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>twords <span class="ot">&lt;-</span> twords[twords <span class="sc">!=</span> <span class="st">""</span>]</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co"># data frame of terms and frequencies</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>dat_words <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(twords))</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>dat_words <span class="ot">&lt;-</span> dat_words[<span class="fu">order</span>(dat_words<span class="sc">$</span>Freq, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_words, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           twords Freq
161       effects   18
500         study   10
519      toxicity    9
313          male    8
192             f    7
197        female    7
303        levels    7
464             s    7
173 environmental    6
180      estrogen    6</code></pre>
</div>
</div>
<p>and then plotting a wordcloud with the function <code>wordcloud2()</code> from the package <code>"wordcloud2"</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud2</span>(dat_words)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="images/api/wordcloud_img.png" class="img-fluid" style="width:70.0%"></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./4-02-api-open-notify.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Open Notify API</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2024, <a href="https://www.gastonsanchez.com">Gaston Sanchez</a></div>   
    <div class="nav-footer-right"><a href="https://www.paypal.com/donate?business=ZF6U7K5MW25W2&amp;currency_code=USD" target="_blank">Donate via PayPal</a></div>
  </div>
</footer>



</body></html>